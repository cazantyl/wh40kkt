<mat-card  *ngIf="authService.isWhiteListed" class="mission-card">
  <mat-card-header>
    <div mat-card-avatar class="mission-header-image"></div>
    <mat-card-title class="header">
      <mat-form-field>
        <input matInput placeholder="Title" [(ngModel)]="mission.title">
      </mat-form-field>
    </mat-card-title>
    <mat-card-subtitle class="description">

    </mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <mat-form-field>
      <textarea matInput cdkTextareaAutosize placeholder="Description" [(ngModel)]="mission.description"></textarea>
    </mat-form-field>

    <mat-form-field>
      <textarea matInput cdkTextareaAutosize placeholder="Alternative Mission option"
        [(ngModel)]="mission.alternative_mission"></textarea>
    </mat-form-field>

    <mat-form-field>
      <textarea matInput cdkTextareaAutosize placeholder="Type" [(ngModel)]="mission.type"></textarea>
    </mat-form-field>
    <br />
    <mat-checkbox class="phase-margin" color="primary" [(ngModel)]="mission.requiresCommander">Requires Commander</mat-checkbox>
    <br /><br />
    <mat-form-field>
      <textarea matInput cdkTextareaAutosize placeholder="The Kill Teams"
        [(ngModel)]="mission.the_kill_teams"></textarea>
    </mat-form-field>

    <mat-form-field>
      <textarea matInput cdkTextareaAutosize placeholder="The Battlefield"
        [(ngModel)]="mission.the_battlefield"></textarea>
    </mat-form-field>

    <mat-form-field>
      <textarea matInput cdkTextareaAutosize placeholder="Scouting Phase"
        [(ngModel)]="mission.scouting_phase"></textarea>
    </mat-form-field>

    <mat-form-field>
      <textarea matInput cdkTextareaAutosize placeholder="Deployment" [(ngModel)]="mission.deployment"></textarea>
    </mat-form-field>

    <mat-form-field>
      <textarea matInput cdkTextareaAutosize placeholder="Battle Length" [(ngModel)]="mission.battle_length"></textarea>
    </mat-form-field>

    <mat-form-field>
      <input matInput cdkTextareaAutosize placeholder="Special Rules Title" [(ngModel)]="mission.specialRulesTitle" />
    </mat-form-field>

    <mat-form-field>
      <textarea matInput cdkTextareaAutosize placeholder="Special Rules" [(ngModel)]="mission.specialRules"></textarea>
    </mat-form-field>

    <mat-form-field>
      <input matInput cdkTextareaAutosize placeholder="Additional Special Rules Title"
        [(ngModel)]="mission.specialRules2Title" />
    </mat-form-field>

    <mat-form-field>
      <textarea matInput cdkTextareaAutosize placeholder="Additional Special Rules"
        [(ngModel)]="mission.specialRules2"></textarea>
    </mat-form-field>

    <img class="map" mat-card-image src={{mission.special_rule_image}} alt="Special Rule Image">
    <app-file-upload [path]="mapPath" (downloadURLEvent)="setSpecialRuleImage($event)"></app-file-upload>

    <mat-form-field>
      <textarea matInput cdkTextareaAutosize placeholder="Victory Conditions"
        [(ngModel)]="mission.victory_conditions"></textarea>
    </mat-form-field>
    <mat-form-field>
      <textarea matInput cdkTextareaAutosize placeholder="Resources" [(ngModel)]="mission.resources"></textarea>
    </mat-form-field>

    <mat-form-field>
      <input matInput placeholder="Attacker Tactic" [(ngModel)]="mission.attackerTactic">
    </mat-form-field>

    <mat-form-field>
      <input matInput placeholder="Defender Tactic" [(ngModel)]="mission.defenderTactic">
    </mat-form-field>

    <h3>Two Player Map</h3>
    <img class="map" mat-card-image src={{mission.two_player_map}} alt="Mission Map">
    <app-file-upload [path]="mapPath" (downloadURLEvent)="setTwoPlayerMap($event)"></app-file-upload>

    <h3>Four Player Map</h3>
    <img class="map" mat-card-image src={{mission.four_player_map}} alt="Mission Map">
    <app-file-upload [path]="mapPath" (downloadURLEvent)="setFourPlayerMap($event)"></app-file-upload>
    <mat-form-field>
      <input matInput placeholder="Source Book" [(ngModel)]="mission.source">
    </mat-form-field>
    <mat-form-field>
      <input matInput placeholder="Source Page" [(ngModel)]="mission.page">
    </mat-form-field>

    <mat-form-field>
      <input matInput placeholder="Contributed By" [(ngModel)]="mission.contributor">
    </mat-form-field>

  </mat-card-content>
  <mat-card-actions *ngIf="authService.isWhiteListed">
    <button mat-button (click)="saveMission()">Save</button>
    <button mat-button (click)="cancel()">Cancel</button>
  </mat-card-actions>
</mat-card>

<div class="fab-container">
  <button *ngIf="authService.isWhiteListed" matTooltip="Delete Mission" matTooltipPosition="before" mat-mini-fab color="warn"
    aria-label="Delete Mission" (click)="confirmMissionDeletion()">
    <mat-icon>delete</mat-icon>
  </button>
  <br />
  <button *ngIf="authService.isWhiteListed" matTooltip="Cancel Edit" matTooltipPosition="before" mat-mini-fab color="accent"
    aria-label="Cancel Editing Mission" (click)="cancel()">
    <mat-icon>cancel</mat-icon>
  </button>
  <br />
  <button *ngIf="authService.isWhiteListed" matTooltip="Save Mission" matTooltipPosition="before" mat-mini-fab color="primary"
    aria-label="Save Mission" (click)="saveMission()">
    <mat-icon>save</mat-icon>
  </button>
</div>

<mat-card *ngIf="!authService.isWhiteListed">
  <h1>Not Whitelisted</h1>
  <p>We're sorry, only white-listed users are allowed to edit anything on the site. If you would like to become whitelisted, please put in a request on github.</p>
</mat-card>